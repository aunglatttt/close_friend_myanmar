@model IEnumerable<CloseFriendMyanamr.Models.EmployeeType>

<div>
    <h2>Employee Types</h2>
    <div id="expenseList">
        @foreach (var item in Model)
        {
            <div>
                <span>@item.Type</span>
                <button onclick="editExpense(@item.Id)">Edit</button>
                <button onclick="deleteExpense(@item.Id)">Delete</button>
            </div>
        }
    </div>
</div>

<div>
    <h2>Add/Edit Employee Type</h2>
    <form id="expenseForm" asp-action="Add" method="post">
        <input type="hidden" id="Id" name="Id" />
        <input type="text" id="Type" name="Type" placeholder="Enter Employee Type" required />
        <button type="submit" id="submitButton">Add</button>
    </form>
</div>

    <script>
        function editExpense(id) {
            fetch(`/Employee/DetailEmployeeType/${id}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('Id').value = data.id;
                    document.getElementById('Type').value = data.type;
                    document.getElementById('submitButton').innerText = 'Update';
                });
        }

        function deleteExpense(id) {
            if (confirm('Are you sure you want to delete this expense?')) {
                fetch(`/Employee/DeleteEmployeeType/${id}`, { method: 'POST' })
                    .then(() => window.location.reload());
            }
        }

        document.getElementById('expenseForm').addEventListener('submit', function (event) {
            event.preventDefault();
            const formData = new FormData(this);
            const action = document.getElementById('submitButton').innerText === 'Add' ? 'AddEmployeeType' : 'UpdateEmployeeType';
            fetch(`/Employee/${action}`, {
                method: 'POST',
                body: formData
            }).then(() => window.location.reload());
        });
    </script>
